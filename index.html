<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>4MFM Radio</title>

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:black;
  overflow:hidden;
}

/* CONTAINER */
#stage{
  position:fixed;
  inset:0;
}

/* VIDEO + IMG */
#bgVideo,
#bgImage{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity 1.2s ease;
}

/* ATIVO */
.active{
  opacity:1;
}

/* FILTRO RETRÔ */
#retro{
  position:fixed;
  inset:0;
  pointer-events:none;
  backdrop-filter:blur(4px);
  background:
    radial-gradient(circle,rgba(255,220,180,0.08),rgba(0,0,0,0.7)),
    repeating-linear-gradient(
      0deg,
      rgba(255,255,255,0.04),
      rgba(255,255,255,0.04) 1px,
      rgba(0,0,0,0.02) 2px,
      rgba(0,0,0,0.02) 3px
    );
}
</style>
</head>

<body>

<div id="stage">
  <video id="bgVideo" muted playsinline webkit-playsinline></video>
  <img id="bgImage">
</div>

<div id="retro"></div>

<script>
/* PLAYLIST REAL */
const media = [
  {type:"video",src:"midia/video1.mp4"},
  {type:"video",src:"midia/video2.mp4"},

  {type:"image",src:"midia/img01.jpg"},
  {type:"image",src:"midia/img02.jpg"},
  {type:"image",src:"midia/img03.jpg"}
  // continue até 25
];

let index = 0;
const video = document.getElementById("bgVideo");
const image = document.getElementById("bgImage");

/* RESET VISUAL */
function hideAll(){
  video.classList.remove("active");
  image.classList.remove("active");
}

/* AVANÇAR */
function next(){
  index = (index + 1) % media.length;
  playCurrent();
}

/* PLAYER CENTRAL */
function playCurrent(){
  hideAll();
  const item = media[index];

  if(item.type === "video"){
    image.src = "";

    video.src = item.src;
    video.currentTime = 0;
    video.classList.add("active");
    video.play().catch(()=>{});

  } else {
    video.pause();
    video.src = "";

    image.src = item.src;
    image.classList.add("active");

    setTimeout(next, 8000);
  }
}

/* EVENTOS */
video.onended = next;
video.onerror = next;
image.onerror = next;

/* START SEGURO (iOS) */
window.addEventListener("click", ()=>{
  if(video.paused){
    playCurrent();
  }
},{once:true});

/* GARANTE PRIMEIRA EXIBIÇÃO */
playCurrent();
</script>

</body>
</html>
